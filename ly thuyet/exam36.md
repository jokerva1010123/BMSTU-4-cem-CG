# 36. Построение реалистических изображений. Физические и  психологические  факторы,  учитываемые  при  создании реалистичных изображений. Простая модель освещения.

## Построение реалистических изображений.

Что нужно учитывать, при построении реалистических изображений:

**1.** Оптические свойства поверхностей.  
**2.** Воспроизводить рисунок на поверхности.  
**3.** Воспроизводить неровности.  
**4.** Повернхости отбрасывают тени (учитывать).  
**5.** Восприятие окружающего мира человеческим глазом.  

## Физические и психологические факторы, учитываемые при создании реалистичных изображений.

Свет, т.е. электромагнитная энергия, после взаимодействия с окр. средой попадает в глаз, где в результате физических и химических реакций вырабатываются электроимпульсы, воспринимаемые мозгом.

Из опытов известно, что чувствительность глаза к яркости света изменяется по логарифмическому закону. Пределы чувствительности к яркости чрезвычайно широки, порядка 10¹⁰, однако глаз не в состоянии одновременно воспринять весь этот диапазон. Глаз реагирует на гораздо меньший диапазон значений относительно яркости, распределённый вокруг уровня адаптации к освещённости. Чувствительность к относительной яркости имеет порядок 100-150. Скорость адаптации к яркости неодинакова для различных частей сетчатки, но тем не менее очень высока. Экстремумы диапазона относительной яркости воспринимаются соответственно как чёрный и белый.
 
Глаз приспосабливается к "средней" яркости обозреваемой сцены; поэтому область с постоянной яркостью (интенсивностью) на тёмном фоне кажется ярче или светлее, чем на светлом фоне. Это явление называется одновременным контрастом.

Ещё одним свойством глаза, имеющим значение для машинной графики, является то, что границы областей постоянной интенсивности кажутся более яркими, в результате чего области с постоянной интенсивностью воспринимаются, как имеющие переменную интенсивность. Это явление называется **эффектом полос Маха**. Эффект полос Маха наблюдается, когда резко изменяется наклон кривой интенсивности. Если кривая интенсивности вогнута, то в этом месте поверхность кажется светлее, если выпукла - темнее.

Урок биологии подошел к концу.

## Простая модель освещения

Свет, отраженный от объекта, может быть **диффузным** и **зеркальным**.

**Диффузное отражение** происходит когда свет как бы проникает под поверхность объекта, поглощается, а затем вновь испускается. Такой свет рассеивается равномерно по всем направлениям - положение наблюдателя не имеет значения.

![clown](https://camo.githubusercontent.com/76758a35a932ce7430c5bf97d88172d61f48092b/68747470733a2f2f73756e392d36382e757365726170692e636f6d2f77415443685f306564427470504c4c39365f4f6e595a6d5254564465594c6c517151745343512f566c6a4571652d686a6d592e6a7067)

```I = I_L * k_α * cos θ```, 0 <= θ <= pi / 2.

* I - интенсивность отраженного источника.
* I_l - интенсивность точечного источника.
* k_α - коэффициент диффузного отражения (этот коэф **всегда** >= 0 и <= 1). Вообще зависит от длины и волны света, но в простых моделях освещения считается постоянным.
* θ - угол между нормалью к поверхности и направлением света.

На объекты реальных сцен падает **рассеянный свет.**  
```I = I_a * k_a + I_l * k_α * cos θ```

* I_a - интенсивность рассеяного света.
* k_a - коэффициент диффузного отражения света. (тоже >= 0 и <= 1)

Опытном путем достигли большей реалистичности при линейной зависимости затухания интенсивности.

![3](https://sun9-66.userapi.com/c857132/v857132378/1b810b/vzDYZeYEaEc.jpg)

* р - это (а) из прошлой формулы
* K - произвольная постоянная, выбираемая на основе эксперимента.
* d - расстояние от центра проекции до объекта.

**Зеркальное отражение света**

![4](https://camo.githubusercontent.com/1a7a6ffbd66da6c388626e55ebee62a2b6681151/68747470733a2f2f73756e392d36302e757365726170692e636f6d2f5732635344437a70464554536456554b694871557367576e4a7075616c7654466c544c6879672f724a67492d7a6d552d734d2e6a7067)

* Зависит от угла падения, длины волны и свойст вещества. 
* Такое отражение является направленным.
* Угол отражения от идеальной отражающей поверхности равен углу падения, в любом другом положении наблюдатель не видит зеркально отражённый свет. Значит, что α = 0 и S = R (S - вектор наблюдателя, R - вектор отражения).
* Благодаря зеркальному отражению на блестящих объектах появляются блики.
* У гладких поверхностей распределение зеркально отражённого света узкое или сфокусированное, у шороховатых - более широкое.

Формула для **простой модели освещения**

![5](https://sun9-26.userapi.com/c857132/v857132378/1b8137/_RAmJhEY9sc.jpg)

Если w - сложная функция, то заменяют константой.

**Формула (функция закраски) применяется для расчета интенсивности или тона точек объекта или
пи кселов изображения.**

![6](https://sun9-45.userapi.com/c857132/v857132378/1b8162/HH27kAVA7U0.jpg)

Если имеется **несколько источников света**, то интенсивности от отдельных источников суммируются.

![7](https://sun9-47.userapi.com/c857132/v857132378/1b8173/S7Y8jDEwcSI.jpg)

* m - количество источников света. 

![8](https://sun9-25.userapi.com/c857132/v857132378/1b8186/1OKKeLIh-JU.jpg)

**Следующий вопрос:**  [37. Построение реалистических изображений. Метод Гуро  закраски  поверхностей (получение сглаженного изображения).](./exam37)


**Предыдущий вопрос:**  [35. Алгоритм определения  видимых  поверхностей путем трассировки лучей.](./exam35)
