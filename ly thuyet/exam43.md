# 43. Глобальная модель освещения с трассировкой лучей.

Модель предназначена для изучения свойств объекта, выполнение каких-то вычислений и т.д.

Есть простая (локальная) модель освещения, которая включает в себя:

* Диффузную составляющую отражения;
* Зеркальную составляющую;
* Рассеянное освещение;

В простой модели освещения мы учитываем цвет, попадающий в рассматриваемую точку от источника света.

Глобальная модель будет содержать в себе те же составляющие, но учитывается еще интенсивность, зеркально отраженный свет от других поверхностей (зеркальное отражение - направленное отражение и его просто учитывать, диффузное трудно, поскольку распространяется по всем направлениям) и пропускание света прозрачными поверхностями.

**I = I<sub>p</sub>K<sub>p</sub> + I<sub>и</sub>К<sub>д</sub> + I<sub>и</sub>К<sub>з</sub> + I<sub>з</sub>К<sub>з</sub> + I<sub>пр</sub>К<sub>пр</sub>**

* I<sub>р</sub> - интенсивность рассеянного освещения: с помощью коэффициента мы учитываем какие либо потери, значения лежат от 0 до 1;
* I<sub>и</sub> - интенсивность источника; 
* K<sub>д</sub> - коэффициент диффузного отражения; 
* К<sub>з</sub> - коэффициента зеркального отражения; 
* I<sub>з</sub>К<sub>з</sub> - добавляем отраженность от других поверхностей, учитывая долю; 
* I<sub>пр</sub> - интенсивность преломленного луча; 
* K<sub>пр</sub> - коэффициент пропускания.

Модель является расширением локальной модели распространения света. Основана на том факте, что из множества лучей, испускаемых источником, на формирование изображения влияют лишь те лучи, которые попадают в объектив аппарата или на сетчатку глаза человека. Свет достигает наблюдателя, если он отражается от поверхности, преломляется или проходит через нее. Из каждой точки источника света исходит бесконечное количество лучей, причём большинство их никогда не достигает точки зрения.

![](https://sun1-17.userapi.com/79vUbKV_OUhDxxS7sDAhEjXvPJTemuOtdYn2Mg/UR65x8zXIAw.jpg)

Большая часть лучей не попадает на сетчатку или в камеру, поэтому не влияeт на формирование изображения. Если изменить ход лучей на противоположный, то в создании изображения примут участие только те лучи, которые “испускает” центр проецирования с учётом рамки отсечения в картинной плоскости. Эти лучи называют приведёнными.

![](https://sun1-91.userapi.com/D19qzQwMEB3OohlHkNR3W-k3MN99oxSuVxjkHg/XIBuVzMjNw8.jpg)

**Следующий вопрос:**  [44. Алгоритм трассировки лучей с использованием глобальной модели  освещения.](./exam44)


**Предыдущий вопрос:**  [42. Учет фактуры при создании реалистических изображений.](./exam42)
