# 02. Преобразования на плоскости. Вывод расчетных соотношений.  Матрицы преобразований.

# Преобразования на плоскости

Преобразование изображения на плоскости: A(x, y) → B(x1, y1)  
```
x1 = Ax + By + C
y1 = Dx + Ey + F
```

**Однородные координаты**  
(x, y, w) - w. масштабный множитель (для плоского случая w = 1), в обратном случае x' = x / w, y' = y / w.  
(x1, y1, 1) = (x, y, 1) * Матрица преобразований  

**Матрица преобразований**  

![matrix](https://camo.githubusercontent.com/05992b0a92d92ae29f982e93b612b75d02372dea/68747470733a2f2f73756e312d39342e757365726170692e636f6d2f776a2d787a717651344c48596d3534594c714e4b5f7555597a4758487137767434634a6e32512f794f4737567171705152632e6a7067)

**Аффинные преобразования** - плоскость не вырождается в прямую или в точку, сохраняется параллельность прямых и существует обратное преобразование.  
* Операция преобразования, в общем случае, не коммутативна.  
* Если определитель матрицы преобразований отличен от нуля, то такое преобразование будет аффинным (потому что тогда существует обратная матрица, которая будет соответствовать обратному преобразованию)
* Любое аффинное преобразование можно представить в виде: перенос, масштабирование, поворот.

# Перенос (dx, dy)
A(x, y) → B(x1, y1)  
x1 = x + dx  
y1 = y + dy  

* |dx|, |dy| < 0.5 не делать

**Матрица преобразований**  

![matrixdxdy](https://camo.githubusercontent.com/e4f463a4c9f4dc3fbd70598f0d9d0d30748b4d21/68747470733a2f2f73756e312d34372e757365726170692e636f6d2f6d676b5933644a506c636d4454533733544c373249325962585a5a5046515258375a414f6a512f61676765453945515738632e6a7067)

# Масштабирование (kx, ky, xm, ym)

x1 = kx * x + (1 - kx) * xm    
y1 = ky * y + (1 - ky) * ym   

* kx = ky - масштабирование однородное
* kx != ky  - масштабирование неоднородное
* Отражение относительно OY: kx = -1, ky = 1
* Отражение относительно OX: kx = 1, ky = -1
* Оражение относительно начала координат: kx = -1, ky = -1
* Если коэф. масштабирования больше 1, то изображение удаляется от центра и увеличивается.
* Если коэф. масштабирование меньше 1, то изображение приближается от центра и уменьшается.

**Матрица преобразований**  

![kxkymatrix](https://camo.githubusercontent.com/3eb7aea801ca8cbc1031746807ab5db68fe7f812/68747470733a2f2f73756e312d31392e757365726170692e636f6d2f5a535f7738596436575f3334386c30394a66724a3531366459566f32584e673469556d6e4e672f6f5a7866446441445633732e6a7067)

# Поворот (xc, yc, θ)
x1 =  xc + (x - xc) * cosθ + (y - yc) * sinθ  
y1 =  yc - (x - xc) * sinθ + (y - yc) * cosθ  

Вывод:  
![vivod](https://sun9-6.userapi.com/c854128/v854128089/23a5ef/rYiRdZWfKFQ.jpg)

* Поворот идёт против часовой стрелки.

**Матрица преобразований**  

![matrixxcyc](https://camo.githubusercontent.com/e2bb602a7634250aac53d77ac0838fc170251424/68747470733a2f2f73756e312d39322e757365726170692e636f6d2f4d4e7055664f4950324f694455326e6a774e6f576e465f3533306a575974564a396f35345a512f6c346b4f386b50795952342e6a7067)

# Коммутативность
**Коммутативность** – независимость результата преобразований от порядка, в котором они происходят. 

Коммутативные операции:  
| Первое преобразование | Второе преобразование |
| --------------------- | --------------------- |
| Перенос | Перенос |
| Масштабирование | Масштабирование |
| Поворот | Поворот |
| Масштабирование однородное | Поворот |

* Остальные комбинации - не коммутативны.

# Аддитивные

**Перенос (матрица переноса * матрица переноса)**  

![move](https://camo.githubusercontent.com/fc733da9ab900997297243fb127e145a36f8d358/68747470733a2f2f73756e312d31352e757365726170692e636f6d2f5656514a5f2d73506d706159473245533471684c5a357353596a6b6431786e2d7a6542346c672f625768476c34716d5763672e6a7067)

**Поворот (матрица поворота * матрица поворота)**  

![turn](https://camo.githubusercontent.com/87d3fb3b98c0bfc74baab8cefe21998fd904e9d8/68747470733a2f2f73756e312d32382e757365726170692e636f6d2f5941495f6858594349633446526a5a4b7958756f6c64796d4734636f3676786c704e796c71512f4b49566451736759474d382e6a7067)

# Мультипликативные  

**Масштабирование (матрица масштабированиея * матрица масштабирования)**

![kxky](https://camo.githubusercontent.com/f259673dc00251f4be2bf61cb52ec37d17d1b6de/68747470733a2f2f73756e312d38372e757365726170692e636f6d2f6e627146764d745044346b51454d3753543251586d384c72373065676e786b694331444f59412f394f3669615a63504f55302e6a7067)



**Следующий вопрос:**  [03. Построение плоских кривых. Выбор шага изменения аргумента. Алгоритм построения эллипса и окружности по методу средней точки.](./exam03)


**Предыдущий вопрос:**  [01. Задача синтеза сложного динамического изображения. Этапы синтеза изображения. Последовательность и основное  содержание.](./exam01)
